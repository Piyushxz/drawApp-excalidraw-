(()=>{var e={};e.id=105,e.ids=[105],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},84297:e=>{"use strict";e.exports=require("async_hooks")},79428:e=>{"use strict";e.exports=require("buffer")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},80745:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(69049),i=r(44334),a=r(75528),o=r.n(a),n=r(62703),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,74731)),"D:\\week 22 excalidraw\\drawApp(excalidraw)\\apps\\excalidraw-frontend\\app\\dashboard\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,44158))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,39035)),"D:\\week 22 excalidraw\\drawApp(excalidraw)\\apps\\excalidraw-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,16260,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,76421,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1682,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,44158))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\week 22 excalidraw\\drawApp(excalidraw)\\apps\\excalidraw-frontend\\app\\dashboard\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},33279:(e,t,r)=>{Promise.resolve().then(r.bind(r,6083)),Promise.resolve().then(r.bind(r,88833))},93527:(e,t,r)=>{Promise.resolve().then(r.bind(r,42711)),Promise.resolve().then(r.bind(r,29169))},53126:(e,t,r)=>{Promise.resolve().then(r.bind(r,90381)),Promise.resolve().then(r.bind(r,65914))},87630:(e,t,r)=>{Promise.resolve().then(r.bind(r,58186)),Promise.resolve().then(r.bind(r,61430))},22977:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,30242,23)),Promise.resolve().then(r.t.bind(r,89332,23)),Promise.resolve().then(r.t.bind(r,75528,23)),Promise.resolve().then(r.t.bind(r,54507,23)),Promise.resolve().then(r.t.bind(r,15723,23)),Promise.resolve().then(r.t.bind(r,73653,23)),Promise.resolve().then(r.t.bind(r,97066,23))},36129:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,68694,23)),Promise.resolve().then(r.t.bind(r,34376,23)),Promise.resolve().then(r.t.bind(r,77964,23)),Promise.resolve().then(r.t.bind(r,64727,23)),Promise.resolve().then(r.t.bind(r,34191,23)),Promise.resolve().then(r.t.bind(r,40921,23)),Promise.resolve().then(r.t.bind(r,74470,23))},42711:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(63027),i=r(8555),a=r(55206);function o({children:e}){return(0,s.jsx)(i.bi,{children:(0,s.jsx)(a.N,{children:e})})}},58186:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var s=r(63027),i=r(2758),a=r(55760),o=r(65783),n=r(40635);let l=(0,r(67314).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var d=r(78754),c=r(16569),p=r(29169);let u=({roomName:e,createdAt:t,id:r})=>{let i=new Date(t),a=(0,c.useRouter)(),u=async()=>{let t=p.o.loading(`Deleting ${e}`);try{let e=await (0,d.getSession)();await o.A.delete("https://13.235.113.13:3008/rooms",{data:{id:r},headers:{token:e?.accessToken}}),p.o.success("Room Deleted Succesfully")}catch(e){p.o.error("Server error")}finally{p.o.dismiss(t)}};return(0,s.jsxs)("div",{className:"w-96 h-40 border border-white/15 rounded-lg shadow-lg flex flex-col justify-between ",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,s.jsx)("h3",{className:"tracking-tighter text-white text-xl font-semibold",children:e}),(0,s.jsx)(n.A,{onClick:u,className:"text-red-600 hover:text-red-600/70 cursor-pointer",size:24})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,s.jsxs)("h3",{className:"tracking-tight text-white/50 text-sm ",children:["Created ",`${i.getDate()}-${i.getMonth()}-${i.getFullYear()}`]}),(0,s.jsxs)("button",{onClick:()=>a.push(`/canvas/${r}`),className:"bg-white font-primary text-black flex items-center gap-2 py-2 px-4 rounded-lg hover:opacity-80",children:[(0,s.jsx)(l,{size:20}),(0,s.jsx)("h3",{className:"tracking-tight text-black text-sm",children:"Join Room"})]})]})]})};function x({isModalOpen:e,setIsModalOpen:t,roomData:r}){return(0,s.jsx)("div",{className:"pt-[50px]",children:(0,s.jsx)("section",{className:"w-full flex justify-center ",children:(0,s.jsxs)("div",{className:"w-[95vw]  md:w-[80vw] px-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"font-semibold tracking-tight text-white text-4xl",children:"Rooms,"}),(0,s.jsxs)("button",{onClick:()=>{t(!0)},className:"bg-white font-primary text-black flex items-center gap-2 py-2 px-4 rounded-lg hover:opacity-80",children:[(0,s.jsx)(a.A,{className:"size-4"}),(0,s.jsx)("h3",{className:" tracking-tight text-black  text-sm",children:"Create Room"})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap py-10 gap-4",children:r.map(({id:e,slug:t,createdAt:r})=>(0,s.jsx)(u,{roomName:t,createdAt:r,id:e},e))})]})})})}let h=()=>(0,s.jsx)("header",{className:"w-full flex justify-center border-b border-white/15",children:(0,s.jsx)("div",{className:"w-[95vw]  md:w-[80vw]",children:(0,s.jsxs)("div",{className:"flex justify-between items-center   p-2 rounded-lg  ",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg border border-white/15",children:(0,s.jsxs)("svg",{fill:"#65e6bf",className:"size-8",viewBox:"-51.2 -51.2 614.40 614.40",xmlns:"http://www.w3.org/2000/svg",stroke:"#65e6bf",children:[(0,s.jsx)("path",{d:"M188.8,334.07H386.13L279.47,448H83.2Z"}),(0,s.jsx)("path",{d:"M512,199H106.61L0,313H405.39Z"}),(0,s.jsx)("path",{d:"M232.2,64H428.8L322.62,177.93H125.87Z"})]})}),(0,s.jsx)("div",{className:"font-semibold text-3xl text-white tracking-tighter",children:"slapdash"})]}),(0,s.jsx)("div",{className:"flex gap-4 items-center",children:(0,s.jsx)("div",{className:"flex size-10 cursor-pointer items-center justify-center rounded-full bg-gradient-to-b from-[#65e6bf]/40 to-[#65e6bf]/70",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user text-white size-4",children:[(0,s.jsx)("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),(0,s.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})})})]})})});var m=r(97659);let f=({setIsModalOpen:e})=>{let t=(0,i.useRef)(null),r=async()=>{let r=t.current?.value;if(!r){p.o.error("Please enter a room name");return}let s=p.o.loading("Creating room");e(!1);try{let t=await (0,d.getSession)(),s=t?.accessToken;if(console.log(s),!s)throw Error("No token found");await o.A.post("https://13.235.113.13:3008/createroom",{roomName:r},{headers:{token:s}}),p.o.success("Room created"),e(!1)}catch(e){p.o.error("Could not create room")}finally{p.o.dismiss(s)}};return(0,s.jsx)("div",{onClick:()=>e(!1),className:"fixed inset-0 flex h-screen justify-center bg-black/70 z-50",children:(0,s.jsxs)(m.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{type:"spring",stiffness:200,bounce:.3,mass:.1,duration:.8},onClick:e=>e.stopPropagation(),className:"p-2 rounded-lg w-[90vw] md:w-96 bg-black mt-[80px] h-48 border border-gray-600/70 shadow-xl tracking-tight",children:[(0,s.jsx)("h1",{className:"font-primary text-xl tracking-tighter text-white font-semibold px-4 mt-2",children:"Create Room"}),(0,s.jsx)("h4",{className:"font-primary text-md text-white text-sm opacity-50 font-normal px-4",children:"Please enter a name for your room"}),(0,s.jsx)("input",{ref:t,type:"text",className:"w-[95%] my-2 mx-4 bg-[#191919] py-2.5 focus:outline-none focus:ring-2 focus:ring-[#65e6bf] rounded-md text-white px-3 text-sm",autoComplete:"off"}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 p-2",children:[(0,s.jsx)("button",{onClick:()=>e(!1),className:"flex items-center bg-[#191919] hover:bg-[#191919]/50 border border-white/15 rounded-lg px-4 gap-1 py-2",children:(0,s.jsx)("h1",{className:"text-sm font-primary text-white",children:"Cancel"})}),(0,s.jsx)("button",{onClick:r,className:"flex items-center bg-[#65e6bf] hover:bg-[#65e6bf]/50 rounded-lg px-4 gap-1 py-2",children:(0,s.jsx)("h1",{className:"text-sm font-primary text-white",children:"Create"})})]})]})})};var w=r(88100);let v=()=>{let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=setInterval(async function(){let e=await (0,d.getSession)(),r=await o.A.get("https://13.235.113.13:3008/rooms",{headers:{token:e?.accessToken}});console.log(r),t(r.data.rooms)},5e3);return()=>{clearInterval(e)}},[]),{roomData:e}};function g(){let[e,t]=(0,i.useState)(!1),{roomData:r}=v();return(0,s.jsxs)("div",{children:[(0,s.jsx)(w.N,{children:e&&(0,s.jsx)(f,{setIsModalOpen:t})}),(0,s.jsx)(h,{}),(0,s.jsx)(x,{roomData:r,isModalOpen:e,setIsModalOpen:t})]})}},61430:(e,t,r)=>{"use strict";r.d(t,{Redirect:()=>a});var s=r(63027),i=r(16569);function a({to:e}){return(0,i.useRouter)(),(0,s.jsx)("div",{})}r(2758)},55206:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,N:()=>o});var s=r(63027),i=r(2758);let a=(0,i.createContext)(void 0);function o({children:e}){let[t,r]=(0,i.useState)("dark");return(0,s.jsx)(a.Provider,{value:{theme:t,toggleTheme:()=>{r(e=>"light"===e?"dark":"light")},setSystemTheme:()=>{r(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}},children:e})}function n(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},33155:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var s=r(3069),i=r(53674),a=r(77914),o=r(81175),n=r.n(o);let l={secret:a.L,providers:[(0,s.A)({name:"Credentials",credentials:{username:{label:"Username",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.username||!e?.password)throw Error("Missing username or password");let t=await i.Y.user.findFirst({where:{username:e?.username,password:e?.password}});if(console.log("user",t),t)return t;throw Error("Invalid credentials")}})],session:{strategy:"jwt",maxAge:259200},jwt:{maxAge:259200},pages:{signIn:"/signin"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.accessToken=n().sign({id:t.id},a.L)),e),session:async({session:e,token:t})=>(e.user.id=t.id,e.accessToken=t.accessToken,e)}}},74731:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(38431),i=r(65914),a=r(54526),o=r(33155),n=r(90381);async function l(){let e=await (0,a.getServerSession)(o.N);return(console.log(e),e?.user)?(0,s.jsx)(n.default,{}):(0,s.jsx)(i.Redirect,{to:"/"})}},39035:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>o});var s=r(38431);r(77709);var i=r(88833),a=r(6083);let o={title:"Create Next App",description:"Generated by create next app"};function n({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsx)("head",{children:(0,s.jsx)("script",{dangerouslySetInnerHTML:{__html:`
              (function() {
                try {
                  var theme = localStorage.getItem('theme');
                  if (theme === 'light' || theme === 'dark') {
                    document.documentElement.classList.add(theme);
                  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                  } else {
                    document.documentElement.classList.add('light');
                  }
                } catch (e) {}
              })();
            `}})}),(0,s.jsxs)("body",{className:"font-satoshi bg-white dark:bg-black transition-colors duration-300",children:[(0,s.jsx)(i.Toaster,{theme:"dark",richColors:!0}),(0,s.jsx)(a.default,{children:e})]})]})}},6083:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78977).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\week 22 excalidraw\\\\drawApp(excalidraw)\\\\apps\\\\excalidraw-frontend\\\\app\\\\providers.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\week 22 excalidraw\\drawApp(excalidraw)\\apps\\excalidraw-frontend\\app\\providers.tsx","default")},90381:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78977).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\week 22 excalidraw\\\\drawApp(excalidraw)\\\\apps\\\\excalidraw-frontend\\\\components\\\\DashboardClient.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\week 22 excalidraw\\drawApp(excalidraw)\\apps\\excalidraw-frontend\\components\\DashboardClient.tsx","default")},65914:(e,t,r)=>{"use strict";r.d(t,{Redirect:()=>s});let s=(0,r(78977).registerClientReference)(function(){throw Error("Attempted to call Redirect() from the server but Redirect is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\week 22 excalidraw\\drawApp(excalidraw)\\apps\\excalidraw-frontend\\components\\Redirect.tsx","Redirect")},77914:(e,t)=>{"use strict";t.L=void 0,t.L=process.env.JWT_SECRET||"2eeqweq3"},53674:(e,t,r)=>{"use strict";t.Y=void 0;let s=r(41855);t.Y=new s.PrismaClient},44158:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(63580);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},77709:()=>{},40635:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(67314).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[633,906,292,783,123,754,834],()=>r(80745));module.exports=s})();